{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "..\\src\\App.html"
  ],
  "sourcesContent": [
    "<svelte:window on:resize=\"galleryResize()\"/>\r\n\r\n\r\n<div class=\"gallery-page\">\r\n    <h1>Галерея</h1>\r\n    <section class=\"toolbar\">\r\n        <div class=\"photo-upload toolbar__section\">\r\n            <h2>Загрузка фото</h2>\r\n            <p>Вы можете загрузить картинку с вашего компьютера</p>\r\n            <form action=\"\" id=\"gallery-inputs\">\r\n                <input type=\"file\" multiple placeholder=\"Загрузите файл с вашего компьютера\"\r\n                       on:change=\"initGallery(this.files)\">\r\n\r\n                <p>или добавьте ссылку на сторонний ресурс(после добавления ссылки, нажмите enter)</p>\r\n                <input type=\"url\" placeholder=\"укажите ссылку на файл\" bind:value=\"imageUrl\">\r\n                <button on:click=\"initGallery()\" type=\"button\">Добавить картинку по ссылке</button>\r\n            </form>\r\n            <button on:click=\"clearGallery()\" type=\"button\">Очистить галлерею</button>\r\n        </div>\r\n        <div class=\"decoration toolbar__section\">\r\n            <h2>Добавление рамки</h2>\r\n            <button on:click=\"set({ borderClass: 'gallery__image-wrapper_black-border' })\">Добавить черную\r\n                рамку\r\n            </button>\r\n            <button on:click=\"set({ borderClass: 'gallery__image-wrapper_flower-border' })\">Добавить цветочную\r\n                рамку\r\n            </button>\r\n            <button on:click=\"set({ borderClass: '' })\">Удалить рамку</button>\r\n        </div>\r\n        <div class=\"toolbar__section loaded-images-info\">\r\n            <button on:click=\"set({ showImagesInfo: !showImagesInfo })\">Показать/скрыть информацию по картинкам</button>\r\n            {#if showImagesInfo}\r\n            <h2>Список загруженных изображений:</h2>\r\n            {#if images.length === 0}\r\n            <p>Вы еще ничего не загрузили</p>\r\n            {/if}\r\n            <ul class=\"images-list\">\r\n                {#each images as image}\r\n                <li>\r\n                    <p>src: {image.src}</p>\r\n                    <p>width: {image.width} px</p>\r\n                    <p>height: {image.height} px</p>\r\n                </li>\r\n                {/each}\r\n            </ul>\r\n            {/if}\r\n        </div>\r\n    </section>\r\n\r\n    <div class=\"gallery\">\r\n        {#each images as image}\r\n        <div class=\"gallery__image-wrapper {borderClass}\" style=\"\r\n        width:{image.gallerySize.width}px;\"><img\r\n                src=\"{image.src}\" alt=\"\" class=\"gallery__image\"></div>\r\n        {/each}\r\n    </div>\r\n</div>\r\n\r\n<style>/*variables*/\n/*common*/\ninput {\n  width: 100%;\n  padding: 15px 30px;\n  font-size: 14px; }\n  input::-webkit-input-placeholder {\n    opacity: 1;\n    transition: all 0.5s ease;\n    color: #b9bebe; }\n  input::-moz-placeholder {\n    opacity: 1;\n    transition: all 0.5s ease;\n    color: #b9bebe; }\n  input:-moz-placeholder {\n    opacity: 1;\n    transition: all 0.5s ease;\n    color: #b9bebe; }\n  input:-ms-input-placeholder {\n    opacity: 1;\n    transition: all 0.5s ease;\n    color: #b9bebe; }\n  input:focus::-webkit-input-placeholder {\n    opacity: 0;\n    transition: all 0.5s ease; }\n  input:focus::-moz-placeholder {\n    opacity: 0;\n    transition: all 0.5s ease; }\n  input:focus:-moz-placeholder {\n    opacity: 0;\n    transition: all 0.5s ease; }\n  input:focus:-ms-input-placeholder {\n    opacity: 0;\n    transition: all 0.5s ease; }\n\nbutton {\n  border: 1px solid #b9bebe;\n  cursor: pointer;\n  box-shadow: 0 0 2px 1px rgba(0, 0, 0, 0.1);\n  background: #ebebeb; }\n\n/* toolbar*/\n.toolbar__section {\n  padding: 20px;\n  box-shadow: 0 0 10px 0px rgba(0, 0, 0, 0.2);\n  margin: 10px 0; }\n\n/* gallery*/\n.gallery {\n  display: flex;\n  justify-content: flex-start;\n  align-items: stretch;\n  flex-flow: row wrap;\n  width: 100%;\n  max-width: 90vw;\n  min-width: 320px;\n  margin: 0 auto; }\n\n.gallery__image-wrapper {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-sizing: border-box; }\n  .gallery__image-wrapper_black-border {\n    margin-top: 10px;\n    margin-bottom: 10px;\n    border: 10px solid transparent;\n    border-image: url(\"images/black-border.png\") 100 round; }\n  .gallery__image-wrapper_flower-border {\n    margin-top: 25px;\n    margin-bottom: 25px;\n    border: 20px solid transparent;\n    border-image: url(\"images/flower-border.png\") 130 round; }\n\n.gallery__image {\n  height: auto;\n  width: 100%;\n  display: block; }\n\n.loaded-images-info p {\n  overflow: hidden;\n  text-overflow: ellipsis; }\n\n@media screen and (min-width: 1200px) {\n  .toolbar {\n    display: flex;\n    flex-flow: row wrap;\n    align-items: stretch;\n    justify-content: space-between; }\n  .toolbar__section {\n    width: 45%; }\n    .toolbar__section.loaded-images-info {\n      width: 100%; } }\n</style>\r\n\r\n<script>\r\n  import layout from 'image-layout/layouts/fixed-partition';\r\n  export default {\r\n    data() {\r\n      return {\r\n        images: [],\r\n        imageUrl: '',\r\n        showImagesInfo: false,\r\n        borderClass: ''\r\n      }\r\n    },\r\n    methods: {\r\n      initGallery(files) {\r\n          let self = this;\r\n          console.info(\"ie1\");\r\n            this.addItems(files).then(function() {\r\n              console.info(\"ie- added\");\r\n              self.galleryResize();\r\n              self.clearFields();\r\n            });\r\n\r\n        },\r\n\r\n      addItems(files) {\r\n        return new Promise((resolve) => {\r\n          let self = this;\r\n        console.info(\"ie2\");\r\n        let imageItems = [];\r\n          if(files !== \"\" && files !== undefined) {\r\n            //картинка загружена с компа\r\n              for (var i = 0, n = files.length; i < n; i++) {\r\n                self.createItem(files[i], false).then(function(imageItem) {\r\n                  imageItems.push(imageItem);\r\n                  if(imageItems.length === files.length) {\r\n                    self.pushImage(imageItems);\r\n                    return resolve();\r\n                  }\r\n                })\r\n              }\r\n            } else {\r\n                //картинка по ссылке\r\n              let imageUrl = this.get().imageUrl;\r\n              if(imageUrl === \"\" || imageUrl === undefined) return\r\n                self.createItem(imageUrl, true).then(function(imageItem) {\r\n                    imageItems.push(imageItem);\r\n                    self.pushImage(imageItems);\r\n                    return resolve();\r\n                })\r\n            }\r\n      });\r\n      },\r\n        createItem(file, link) {\r\n          let self = this;\r\n          return new Promise((resolve) => {\r\n            if(link === true) {\r\n                self.getSize(file, function(size){\r\n                  let imageItem = {\r\n                    \"src\": `${file}`,\r\n                    \"width\": size.width,\r\n                    \"height\": size.height,\r\n                    gallerySize : {\r\n                      width: 0,\r\n                      height: 0\r\n                    }\r\n                  };\r\n                  return resolve(imageItem);\r\n                });\r\n\r\n              } else {\r\n                self.renderImage(file, function(src){\r\n                  self.getSize(src, function(size){\r\n                    let imageItem = {\r\n                      \"src\": `${src}`,\r\n                      \"width\": size.width,\r\n                      \"height\": size.height,\r\n                      gallerySize : {\r\n                        width: 0,\r\n                        height: 0\r\n                      }\r\n                    };\r\n                    return resolve(imageItem);\r\n                  });\r\n                })\r\n              }\r\n          });\r\n        },\r\n\r\n      renderImage(file, callback) {\r\n        let src = '';\r\n        let reader = new FileReader();\r\n        reader.onload = function (e) {\r\n          src = e.target.result;\r\n          callback(src);\r\n        };\r\n\r\n        reader.readAsDataURL(file);\r\n      },\r\n\r\n      getSize(src, callback) {\r\n        let img = new Image();\r\n        img.onload = function () {\r\n          let width = this.width;\r\n          let height = this.height;\r\n          let size = {\r\n            \"width\": width,\r\n            \"height\": height\r\n          };\r\n\r\n          callback(size);\r\n        };\r\n\r\n        img.src = src;\r\n\r\n        img.onerror = function () {\r\n          alert(\"Упс. что-то пошло не так. Проверьте правильность ссылки\");\r\n          return\r\n        };\r\n\r\n\r\n      },\r\n\r\n      pushImage(imageItems) {\r\n        let imagesArray = this.get().images;\r\n        this.set({images: []});\r\n\r\n        for (var i = 0, n = imageItems.length; i < n; i++) {\r\n          imagesArray.push(imageItems[i])\r\n        }\r\n        this.set({images: imagesArray});\r\n\r\n      },\r\n      galleryResize () {\r\n        let self = this;\r\n            let imagesArray = this.get().images;\r\n            var galleryWidth = document.getElementsByClassName(\"gallery\")[0].offsetWidth;\r\n            this.getGallerySizes(imagesArray, galleryWidth).then(function (resultSizes) {\r\n              self.setGallerySizes(imagesArray, resultSizes, galleryWidth);\r\n            });\r\n      },\r\n      getGallerySizes(imagesArray, galleryWidth) {\r\n        return new Promise((resolve) => {\r\n          let resultSizes = layout(imagesArray, {\r\n            align: 'center', // optional\r\n            containerWidth: galleryWidth,\r\n            spacing: 0,\r\n            idealElementHeight: 250\r\n          });\r\n\r\n          return resolve(resultSizes);\r\n        });\r\n      },\r\n      setGallerySizes(imagesArray, resultSizes, galleryWidth) {\r\n        for (var i = 0, n = imagesArray.length; i < n; i++) {\r\n          let width = resultSizes.positions[i].width - 1;\r\n          imagesArray[i].gallerySize.width = +width.toFixed(1);\r\n        }\r\n        this.set({images: imagesArray});\r\n      },\r\n      clearFields() {\r\n        document.getElementById(\"gallery-inputs\").reset();\r\n      },\r\n\r\n      clearGallery() {\r\n        this.set({images: []});\r\n      }\r\n    }\r\n  };\r\n</script>"
  ],
  "names": [],
  "mappings": "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"
}